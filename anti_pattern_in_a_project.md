# ほんとにあったアンチパターン

エンジニアとして勉強していると「設計はこうするべき」「命名はこうするべき」「コーディングスタイルはこうするべき」など様々なパターンを学習するが、プロジェクトによっては守られていないことがある。

今回はほんとにあった気になったものたちを記憶ベースでまとめて、さらにどのようにするのが良いかまで書きます。

## 命名

### テーブル名の統一性

テーブル名やカラム名についてそもそも統一がされていなかった。

テーブル名については単数形と複数形が混在していた。

どちらが正しいかは考え方によるが同一プロジェクト内では片方に統一をして、新しいテーブルを作る場合はそのルールに従うようにすると良い。

### カラム名

突然の質問になってしまいますが、`start_date`というカラム名はどのようなデータ型を持っていると思いますか？

[MySQLのドキュメント](https://dev.mysql.com/doc/refman/8.0/ja/datetime.html)では`DATE 型は、日付部分を含むが時間部分は含まない値に使用されます。 MySQL は、DATE 値を'YYYY-MM-DD'形式で取得して表示します。 ` という記載があります。

つまりサンプルの値としては'2024-07-01'という値が入ることを私は期待していました。

が実際には`datetime`で実装されていて、'2024-07-01 00:00:00'という値が入っていました。

カラム名や変数名に関しては「名は体を表す」ということを意識して、その変数がどのような値を持つ**読む人の気持ちになって**命名すると良い。

## コーディング

## ifのネスト

ifのネストが深いことが多かった。

例えば以下のようなコードがあった場合どちらが読みやすいだろうか。

```go
// ネストしている場合
if a {
    if b {
        if c {
            // 処理
        }
    }
}

// ネストしていない場合
if !a {
    return
}

if !b {
    return
}

if !c {
    return
}

```

Named Return Valuesが使われている関数でfalseを返す

## 設計

N+1問題

一覧取得APIがPOSTでコールされる

インターフェース毎の責務が曖昧

DIされているところとされていないところがある

数値の型で扱いたいがstringで書かれている。

## テスト

とにかくテストがされていない

されていてもケースが不十分

## ドキュメント

ドキュメントは存在しない
