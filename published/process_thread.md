# プロセスとスレッドを理解する

シングルスレッド、マルチスレッド、プロセスなど名前は聞いたことあるものの、それぞれの違いがよくわからないという方も多いのではないでしょうか。（筆者はそうだった）

この記事では、プロセスとスレッドの違いについて解説します。

## プロセスとは

例えばみなさんがあるプログラムを作成して実行したとします。

実行されたときにOSはそのプログラムをメモリ上に展開し、CPUを割り当てて実行します。このプログラムの実行単位をプロセスと呼びます。

このプロセス内のリソースは

- コードセグメント
- データセグメント
- スタックセグメント
- ヒープセグメント

などがあります。

プロセスはOSから割り当てられたリソースを持ち、プロセス間でのデータの共有は簡単ではなく、プロセス間での通信はInter-Process Communication（IPC）を使うことで実現できます。

## スレッドとは

一方でスレッドはプロセス内で実行される単位です。

プロセスは複数のスレッドを持つことができ、スレッドはプロセス内のリソースを共有します。

スレッドはプロセス内のリソースを共有するため、プロセス間の通信よりも効率的にデータの共有ができます。

スレッドにはシングルスレッドとマルチスレッドがあり、シングルスレッドは1つのスレッドで処理を行い、マルチスレッドは複数のスレッドで処理を行います。

シングルスレッドは処理が逐次実行されるため、処理が遅くなることがありますが、データの競合が起こりにくいという特徴があります。

一方でマルチスレッドは複数のスレッドで処理を行うため、処理が高速になることがあるが、データの競合が起こりやすいという特徴があります。

## Goにおけるゴルーチン(goroutine)

Go言語ではゴルーチンという概念があります。

ゴルーチンはGoのランタイムによって管理される軽量なスレッドで、Goのプログラム内で複数のゴルーチンを作成することができます。

ゴルーチンはスレッドよりも軽量で、スレッドの数が増えてもOSのスレッド数が増えるわけではないため、スレッドよりも多くのゴルーチンを作成することができます。

ゴルーチンはGoのランタイムによってスケジューリングされるため、プログラマはゴルーチンの作成やスケジューリングを意識する必要がありません。

Goのゴルーチンはプロセス内のリソースを共有するため、データの共有が容易であり、プロセス間の通信よりも効率的にデータの共有ができます。

（スレッドと記載しましたが厳密にはOSのスレッドとは異なる）
